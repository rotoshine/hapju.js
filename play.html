<head>
  <meta charset="utf-8" />
  <title>커버곡 투표</title>
</head>

<body>
</body>
<template name="Nav">
  <div class="navbar navbar-inverse">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse"
        data-target=".navbar-responsive-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">커버곡 투표</a>
    </div>
    <div class="navbar-collapse collapse navbar-responsive-collapse">
      <ul class="nav navbar-nav nav-menus">
        <li class="{{activeIfTemplateIs 'Bands'}}"><a href="/bands">Band</a></li>
        {{#if currentUser}}
          <li class="{{activeIfTemplateIs 'MyBands'}}"><a href="/my-bands">My Band Page</a></li>
        {{/if}}
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
          {{#if currentUser}}
            <img class="profile-image" src="{{profileImage}}" alt="">
          {{/if}}
          {{>loginButtons}}
        </li>
      </ul>
    </div>
  </div>
</template>
<template name="Index">
  {{>Nav}}
  <div class="container">
    <div class="col-xs-12">
      <div class="panel panel-material-indigo">
        <div class="panel-heading">이게 뭐죠?</div>
        <div class="panel-body">
          커버곡을 연주하는 밴드에서 커버곡 고르기 쉽게 하기 위해서 만들었습니다.
        </div>
      </div>
    </div>

    <div class="col-xs-12 col-md-6">
      <div class="panel panel-material-indigo">
        <div class="panel-heading">새로 등록된 곡</div>
        <div class="panel-body">
          <ul class="list-inline">
            {{#each newSongs}}
              <li>
                <div class="index-new-song">
                  <iframe class="youtube-link" src="{{youtubeLink}}" frameborder="0"></iframe>
                  <div class="index-new-song-info">
                    <span class="index-new-song-regist-band-name">{{registBandName}}</span>{{getTextConnector registBandName}} 등록
                  </div>
                </div>
              </li>
            {{/each}}
          </ul>
        </div>
      </div>
    </div>

    <div class="col-xs-12 col-md-6">
      <div class="panel panel-material-indigo">
        <div class="panel-heading">새로 등록된 밴드</div>
        <div class="panel-body">
          <ul class="list-inline">
            {{#each newBands}}
              <li>
                {{>BandProfile}}
              </li>
            {{/each}}
          </ul>
        </div>
      </div>
    </div>
  </div>
</template>
<template name="Bands">
  {{>Nav}}
  <div class="container">
      <div class="col-xs-12">
        <div class="panel panel-material-indigo">
          <div class="panel-heading">등록된 밴드 목록</div>
          <div class="panel-body">
            {{#if bandNotExist}}
              <div class="well">헉! 등록된 밴드가 하나도 없네요.</div>
            {{/if}}
            {{#each bands}}
              {{>BandProfile}}
            {{/each}}
          </div>
        </div>
      </div>
  </div>
</template>
<template name="MyBands">
  {{>Nav}}
  <div class="container">
    {{#if notExistEnteredBand}}
      <div class="col-xs-12">
        <div class="well">소속된 밴드가 없습니다.</div>
      </div>
    {{/if}}
    {{#unless notExistEnteredBand}}
      <div class="col-xs-12">
        <div class="panel panel-material-indigo">
          <div class="panel-heading">내가 소속된 밴드</div>
          <div class="panel-body">
            {{#each myBands}}
              {{>BandProfile}}
            {{/each}}
          </div>
        </div>
      </div>
    {{/unless}}
    {{#if currentUser}}
      <div class="col-xs-12">
        {{>RegistBand}}
      </div>
    {{/if}}
  </div>
</template>

<template name="BandProfile">
  <div class="band-profile text-center">
    <a href="/bands/{{name}}">
      <div class="band-profile-image" style="background-image:url('{{profileImage}}')"></div>
    </a>
    <div class="index-band-name">
      <a href="/bands/{{name}}">{{name}}</a>
    </div>
    <div>현재 <span class="label label-info">{{songCount}}</span>곡 등록</div>
    <ul class="list-unstyled index-band-members">
      {{#each members}}
        <li>{{position}} :
          <a href="https://twitter.com/{{twitterId}}" target="_blank">{{twitterId}}</a>
        </li>
      {{/each}}
    </ul>
  </div>
</template>

<template name="RegistBand">
  <div class="panel panel-material-indigo">
    <div class="panel-heading">밴드 등록요청</div>
    <div class="panel-body text-center">
      <form class="regist-band-form col-xs-12">
        <div class="form-group">
          <label class="col-xs-4">밴드 이름 <span><i class="mdi-action-done"></i></span></label>
          <div class="col-xs-8">
            <input type="text" class="form-control" id="regist-band-name"
              placeholder="밴드 이름을 입력하세요." required>
          </div>
        </div>
        <div class="form-group">
          <label class="col-xs-4">멤버</label>
          <div class="col-xs-8 pull-right regist-band-members">
            {{>RegistBandMember}}
          </div>
        </div>
        <div class="col-xs-12 text-right">
          <button type="button" class="btn btn-info add-member btn-fab btn-raised mdi-social-person-add"></button>
        </div>
        <div class="form-group">
          <label class="col-xs-4">프로필 이미지</label>
          <div class="col-xs-8">
            {{>upload_bootstrap contentType='images' fileTypes='.jpg' multiple=false }}
          </div>
        </div>
      </form>
    </div>
    <div class="panel-footer text-right">
      <button type="button" class="btn btn-primary regist-band mdi-content-save btn-fab btn-raised"></button>
    </div>
  </div>
</template>
<template name="RegistBandMember">
  <div class="regist-band-member">
    <div class="col-xs-4">
      <input type="text" class="form-control regist-band-member-position" placeholder="position" required>
    </div>
    <div class="col-xs-5">
      <input type="text" class="form-control regist-band-member-twitter-id" placeholder="twitter id" required>
    </div>
    <div class="col-xs-3">
      <button type="button" class="btn btn-danger remove-member mdi-content-clear btn-xs"></button>
    </div>
  </div>
</template>
<template name="BandHome">
  {{>Nav}}
  <div class="container">
    <div class="col-xs-12 col-md-4">
      {{>BandProfile}}
    </div>
    <div class="col-xs-12 col-md-8">
      <div class="panel panel-material-indigo">
        <div class="panel-heading">커버곡 목록</div>
        <div class="panel-body">
          <ul class="list-unstyled">
            {{#if isMyBand}}
              <li>
                <div class="add-song well">
                  <form class="form-vertical">
                    <div class="form-group">
                      <label class="col-xs-4">원곡 밴드이름</label>
                      <div class="col-xs-8">
                        <input id="origin-band-name" type="text" class="form-control" placeholder="원곡 밴드이름을 적어주세요.">
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-xs-4">곡 이름</label>
                      <div class="col-xs-8">
                        <input id="song-name" type="text" class="form-control" placeholder="곡 이름을 적어주세요.">
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-xs-4">youtube URL</label>
                      <div class="col-xs-8">
                        <input id="youtube-url" type="text" class="form-control" placeholder="youtube URL을 적어주세요.">
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="col-xs-4">설명</label>
                      <div class="col-xs-8">
                        <textarea id="" rows="4" class="form-control" placeholder="곡에 대한 설명을 적어주세요."></textarea>
                      </div>
                    </div>
                    <div class="text-right">
                      <button class="btn btn-info"><i class="mdi-image-audiotrack"></i>추가</button>
                    </div>
                  </form>
                </div>
              </li>
            {{/if}}
            {{#each songs}}
              <li></li>
            {{/each}}
          </ul>
        </div>
      </div>
      {{#if isMyBand}}
        TODO 편집기능 넣기
      {{/if}}
    </div>
  </div>
</template>
<template name="BandNotFound">
  {{>Nav}}
  <div class="container">
    <div class="well">
      존재하지 않는 밴드입니다!
    </div>
  </div>
</template>
